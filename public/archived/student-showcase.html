<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Coding Showcase - Code with Morais</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Pyodide for Python execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .hero-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,0 1000,0 1000,100"/></svg>');
            pointer-events: none;
        }

        .hero-header::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 2px,
                rgba(255, 255, 255, 0.03) 2px,
                rgba(255, 255, 255, 0.03) 4px
            );
            animation: slidePattern 20s linear infinite;
            pointer-events: none;
        }

        @keyframes slidePattern {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100px); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero-header .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            font-weight: 300;
            margin-bottom: 1rem;
        }

        .hero-header .description {
            font-size: 1.1rem;
            opacity: 0.8;
            max-width: 700px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-3px);
        }

        .showcase-content {
            padding: 2rem;
        }

        .filters-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .program-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .program-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .program-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .program-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .program-author {
            font-size: 0.9rem;
            color: #718096;
            font-weight: 500;
        }

        .program-category {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .program-description {
            color: #4a5568;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .code-preview {
            background: #1a202c;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #e2e8f0;
            overflow-x: auto;
            max-height: 300px;
            overflow-y: auto;
            position: relative;
        }

        .code-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 25px;
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border-radius: 12px 12px 0 0;
        }

        .code-preview .code-dots {
            position: absolute;
            top: 8px;
            left: 12px;
            display: flex;
            gap: 4px;
            z-index: 1;
        }

        .code-preview .code-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ef4444;
        }

        .code-preview .code-dots span:nth-child(2) {
            background: #f59e0b;
        }

        .code-preview .code-dots span:nth-child(3) {
            background: #10b981;
        }

        .code-content {
            margin-top: 20px;
        }

        .keyword { color: #c678dd; }
        .function { color: #61afef; }
        .string { color: #98c379; }
        .number { color: #d19a66; }
        .comment { color: #5c6370; }

        .program-actions {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            align-items: center;
        }

        .run-btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }

        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .run-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .view-code-btn {
            padding: 0.75rem 1rem;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-code-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }

        .output-section {
            background: #0f172a;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid #1e293b;
            display: none;
        }

        .output-section.show {
            display: block;
        }

        .output-header {
            color: #94a3b8;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .output-display {
            background: #000;
            color: #00ff00;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            min-height: 60px;
            white-space: pre-wrap;
            border: 1px solid #1e293b;
            overflow-y: auto;
            max-height: 200px;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .loading-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats-bar {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #718096;
            font-weight: 500;
        }

        .error-display {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.2);
            margin-top: 1rem;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .main-container {
                margin: 10px;
                border-radius: 16px;
            }

            .hero-header {
                padding: 3rem 1rem;
            }

            .hero-header h1 {
                font-size: 2.5rem;
            }

            .showcase-content {
                padding: 1rem;
            }

            .programs-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .program-card {
                padding: 1.5rem;
            }

            .filter-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }

            .filter-btn {
                flex-shrink: 0;
            }

            .stats-bar {
                flex-direction: column;
                gap: 1rem;
            }

            .program-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .run-btn, .view-code-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Initializing Python Environment</h3>
            <p>Setting up the interactive coding environment...</p>
        </div>
    </div>

    <!-- Background -->
    <canvas id="particles-canvas"></canvas>

    <div class="main-container">
        <!-- Hero Header -->
        <header class="hero-header">
            <div class="hero-content">
                <a href="/dashboard" class="back-link">
                    <i class="fas fa-arrow-left"></i>
                    Back to Dashboard
                </a>
                <h1><i class="fas fa-star"></i> Student Coding Showcase</h1>
                <p class="subtitle">Creative Programs by Our Amazing Students</p>
                <p class="description">
                    Explore the incredible creativity and programming skills of our students! Each program showcases 
                    different Python concepts and problem-solving approaches. Click "Run Program" to interact with their code.
                </p>
            </div>
        </header>

        <!-- Main Content -->
        <div class="showcase-content">
            <!-- Statistics Bar -->
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="totalPrograms">16</span>
                    <span class="stat-label">Student Programs</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">6</span>
                    <span class="stat-label">Categories</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="completedRuns">0</span>
                    <span class="stat-label">Successful Runs</span>
                </div>
            </div>

            <!-- Filters Section -->
            <div class="filters-section">
                <h2 class="filters-title">
                    <i class="fas fa-filter"></i>
                    Filter by Category
                </h2>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">
                        <i class="fas fa-code"></i>
                        All Programs
                    </button>
                    <button class="filter-btn" data-category="games">
                        <i class="fas fa-gamepad"></i>
                        Games
                    </button>
                    <button class="filter-btn" data-category="utilities">
                        <i class="fas fa-tools"></i>
                        Utilities
                    </button>
                    <button class="filter-btn" data-category="interactive">
                        <i class="fas fa-comments"></i>
                        Interactive
                    </button>
                    <button class="filter-btn" data-category="logic">
                        <i class="fas fa-brain"></i>
                        Logic & Math
                    </button>
                    <button class="filter-btn" data-category="creative">
                        <i class="fas fa-palette"></i>
                        Creative
                    </button>
                </div>
            </div>

            <!-- Programs Grid -->
            <div class="programs-grid" id="programsGrid">
                <!-- Programs will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Particles Background Script -->
    <script src="/particles-init.js"></script>

    <script>
        // Python execution environment
        let pyodide = null;
        let completedRuns = 0;

        // Initialize Pyodide
        async function initPyodide() {
            try {
                pyodide = await loadPyodide();
                await pyodide.loadPackage(['micropip']);
                console.log('Pyodide initialized successfully');
                document.getElementById('loadingOverlay').style.display = 'none';
            } catch (error) {
                console.error('Failed to initialize Pyodide:', error);
                document.getElementById('loadingOverlay').innerHTML = `
                    <div class="loading-content">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #ef4444; margin-bottom: 1rem;"></i>
                        <h3>Failed to Load Python Environment</h3>
                        <p>The interactive Python environment could not be loaded. You can still view the code, but programs cannot be executed.</p>
                        <button onclick="document.getElementById('loadingOverlay').style.display='none'" 
                                style="padding: 0.75rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 1rem;">
                            Continue Anyway
                        </button>
                    </div>
                `;
            }
        }

        // Student programs data structure
        const studentPrograms = [
            {
                id: 1,
                title: "Voting Eligibility Checker",
                author: "Student Submission",
                category: "logic",
                description: "A program that checks if someone is eligible to vote based on age and citizenship status.",
                code: `age = input("Enter your age: ")
print()
status = input("Enter your citizenship status (citizen/other): ")
print()
if int(age) >= 18 and str(status).lower() in ['citizen', 'citizen']:
    print("You are eligible to vote.")
else:
    print("You are not able to vote.")`,
                hasInput: true
            },
            {
                id: 2,
                title: "Roll Dice for Money Game",
                author: "Student Submission", 
                category: "games",
                description: "An exciting dice rolling game where players can win money based on their dice combinations!",
                code: `import random

print("Welcome to Roll Dice for Money!")
print()
print("We'll be taking half of the money that you use.")
print()
 
num1 = random.randint(1, 6)
num2 = random.randint(1, 6)

print("You rolled a", str(num1), "and a", str(num2) + "!")
print()

if num1 == num2:
    print("You rolled doubles! That means you quadrupled your money!")
elif num1 + num2 >= 10:
    print("Your numbers add up to 10 or more! That means that you tripled your money!")
elif num1 + num2 <= 5:
    print("Your number add up to 5 or less! That means you")
    print("tripled your money!")
else:
    print("You get 1.5 times the your half of money for playing!")`,
                hasInput: false
            },
            {
                id: 3,
                title: "Tiny Adventure Game",
                author: "Student Submission",
                category: "games",
                description: "A text-based adventure game where players navigate through a dark forest making crucial decisions.",
                code: `print("Welcome to the Tiny Adventure!")
print("You find yourself in a dark forest.")
print("Do you go 'left' or 'right'?")

choice1 = input("> ").lower()

if choice1 == "left":
    print("You encounter a grumpy troll guarding a bridge.")
    print("Do you 'fight' the troll or 'try to sneak past'?")
    choice2 = input("> ").lower()

    if choice2 == "fight":
        print("The troll easily overpowers you. Game Over!")
    elif choice2 == "try to sneak past":
        print("You successfully sneak past the troll and find a hidden treasure chest!")
        print("You win!")
    else:
        print("Invalid choice. The troll gets bored and eats you. Game Over!")

elif choice1 == "right":
    print("You discover a sparkling river.")
    print("Do you 'swim across' or 'look for a boat'?")
    choice2 = input("> ").lower()

    if choice2 == "swim across":
        print("The current is too strong, and you drown. Game Over!")
    elif choice2 == "look for a boat":
        print("You find a small, sturdy boat and safely cross the river.")
        print("You discover a beautiful meadow filled with flowers. You win!")
    else:
        print("Invalid choice. A giant fish jumps out and eats you. Game Over!")

else:
    print("Invalid choice. You wander aimlessly and get lost. Game Over!")`,
                hasInput: true
            },
            {
                id: 4,
                title: "Basic Condition Checker",
                author: "Student Submission",
                category: "logic",
                description: "Simple programs demonstrating if-else conditions with different scenarios.",
                code: `height = 52
if height > 48:
    print('You can ride the roller coaster!')

score = 65
if score > 70:
    print('You passed the test!')
else:
    print('You did not pass')

num_people = 10
if num_people == 10:
    print('Time for pizza!')`,
                hasInput: false
            },
            {
                id: 5,
                title: "Magic 8-Ball Oracle",
                author: "Student Submission",
                category: "interactive",
                description: "Ask the mystical Magic 8-Ball any yes/no question and receive a random prophetic response!",
                code: `import random

responses = [
    "It is certain.", "It is decidedly so.", "Without a doubt.", "Yes â€” definitely.",
    "You may rely on it.", "As I see it, yes.", "Most likely.", "Outlook good.",
    "Yes.", "Signs point to yes.", "Reply hazy, try again.", "Ask again later.",
    "Better not tell you now.", "Cannot predict now.", "Concentrate and ask again.",
    "Don't count on it.", "My reply is no.", "My sources say no.", "Outlook not so good.",
    "Very doubtful."
]

question = input("Ask the Magic 8-Ball a yes/no question: ").strip()
if not question:
    print("You didn't ask a question â€” try again later.")
else:
    print("Magic 8-Ball says:", random.choice(responses))`,
                hasInput: true
            },
            {
                id: 6,
                title: "Lucky Number Guessing Game",
                author: "Student Submission",
                category: "games",
                description: "Test your luck! Guess a number between 1-777 and see if you can match the lucky number.",
                code: `import random

lucky_num = random.randint(1, 777)
guess = int(input("Pick a number between (1-777) and see if you get the right number!: "))

if guess == lucky_num:
    print("Congratulations you guessed the right number!")
else:
    print("Good guess but the number was", lucky_num)`,
                hasInput: true
            },
            {
                id: 7,
                title: "Rock Paper Scissors",
                author: "Student Submission",
                category: "games",
                description: "Classic rock, paper, scissors game against the computer. Fixed syntax errors for proper gameplay.",
                code: `import random

choices = ['rock', 'paper', 'scissors']

user_choice = input("Choose rock, paper, scissors: ").lower()
computer_choice = random.choice(choices)

print(f"You chose: {user_choice}")
print(f"Computer chose: {computer_choice}")

if user_choice == computer_choice:
    print("It's a tie!")
elif (user_choice == "rock" and computer_choice == "scissors") or \\
     (user_choice == "scissors" and computer_choice == "paper") or \\
     (user_choice == "paper" and computer_choice == "rock"):
    print("You win!")
else:
    print("You lose!")`,
                hasInput: true
            },
            {
                id: 8,
                title: "Letter Guessing Game",
                author: "Student Submission",
                category: "games",
                description: "Guess a letter and see if you can match the randomly selected one! Fixed to work properly.",
                code: `import random

letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 
           'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

question = input("Guess a letter (a-z): ").lower()
guess = random.choice(letters)
   
if question == guess:
    print("You guessed correctly! Congratulations!")
else:
    print("Guess again! The correct letter was:", guess)`,
                hasInput: true
            },
            {
                id: 9,
                title: "Random Age Cookie Game",
                author: "Student Submission",
                category: "games",
                description: "Guess the random age correctly to win a delicious chocolate chip cookie reward!",
                code: `import random

print("Welcome to the random age game, if you guess the correct age you get a reward of a cookie")
age_random = random.randint(0, 122)
guess = int(input("Pick a number between (0-122) and see if you guess the right age: "))

if guess == age_random:
    print("Great job! You guessed the correct age. You now get a chocolate chip cookie!")
else:
    print("That is unfortunate! Better luck next time! No cookie for you.", "The correct age was", age_random)`,
                hasInput: true
            },
            {
                id: 10,
                title: "Dice Number Guessing",
                author: "Student Submission",
                category: "games",
                description: "Try to guess the dice roll! Can you predict what number the dice will show?",
                code: `import random

question = int(input("Guess a number (1-6): "))
guess = random.randint(1, 6)

print(f"You guessed: {question}")
print(f"Dice rolled: {guess}")

if question == guess:
    print("You guessed it! Congratulations!")
else:
    print("You did not guess it! Better luck next time!")`,
                hasInput: true
            },
            {
                id: 11,
                title: "Colorful Ball Animation",
                author: "Student Submission",
                category: "creative",
                description: "A JavaScript program that creates a colorful ball that changes colors every 400ms. Visual and creative!",
                code: `// JavaScript Code for CodeHS or similar platform
var ball = new Circle(30);
ball.setPosition(getWidth()/2, getHeight()/2);
add(ball);

function paintBall() {
    ball.setColor(Randomizer.nextColor());
}

setTimer(paintBall, 400);

# Note: This is JavaScript code that would run in CodeHS
# It creates a ball that changes colors every 400 milliseconds`,
                hasInput: false,
                isJavaScript: true
            },
            {
                id: 12,
                title: "Smart Question Answerer",
                author: "Student Submission",
                category: "interactive",
                description: "An intelligent program that answers your questions with random responses. Fixed logic errors.",
                code: `import random

def answer_question():
    question = input("Ask me your question: ")  
    answer = random.choice(["Yes", "No", "That's a dumb question"])
    print("Answer:", answer)
    
    # Simple validation example
    user_input = input("Rate this answer (1-10): ")
    try:
        rating = int(user_input)
        if rating > 0:
            print("Thanks for the positive rating!")
        elif rating == 0:
            print("Neutral rating, I'll try to improve!")
        else:
            print("I'll work on giving better answers!")
    except ValueError:
        print("Please enter a number next time!")

answer_question()`,
                hasInput: true
            },
            {
                id: 13,
                title: "Australian Animal Quiz",
                author: "Student Submission",
                category: "interactive",
                description: "Test your knowledge about Australian animals! Fixed the logic and added proper feedback.",
                code: `question = input("What animal lives in Australia?: ").lower()

correct_answers = ["koala", "kangaroo", "wombat", "platypus"]
animal = "koala"

if question in correct_answers:
    print("You got it! Great job!")
elif question == animal:
    print("Perfect! Koalas are indeed Australian!")
else:
    print("Sorry that is incorrect! A clue: they have big noses and they have a powerful chew. Try again!")
    print("Some correct answers include: koala, kangaroo, wombat, platypus")`,
                hasInput: true
            },
            {
                id: 14,
                title: "Math Quiz & Number Guessing",
                author: "Student Submission",
                category: "logic",
                description: "A two-part program: first a math quiz, then a number guessing game. Educational and fun!",
                code: `import random

# Part 1: Math Quiz
num1 = random.randint(1, 600)
num2 = random.randint(1, 600)
correct_answer = num1 + num2

print("=== MATH QUIZ ===")
print("What is", num1, "+", num2, "?")
user_answer = int(input("Your answer: "))

if user_answer == correct_answer:
    print("Correct! Excellent job.")
else:
    print("Not quite. The correct answer was", correct_answer)

print("\\n=== NUMBER GUESSING GAME ===")
# Part 2: Number Guessing
num1 = random.randint(1, 100)
num2 = int(input("Guess a number between 1-100: "))

if num2 == num1:
    print("Good job you got it right!")
else:
    print("Good try but you got it wrong. The number was", num1)`,
                hasInput: true
            },
            {
                id: 15,
                title: "Dice Battle Game",
                author: "Student Submission",
                category: "games",
                description: "Roll dice against the computer and see who gets the higher number! Fixed input handling.",
                code: `import random

user_input = input("Type 'roll' to start rolling: ").lower()

if user_input == 'roll':
    computer_input = random.randint(1, 6)
    user_number = random.randint(1, 6)
    
    print('You rolled', user_number)
    print('Bot rolled', computer_input)
    
    if user_number > computer_input:
        print('Congrats you win!')
    elif user_number < computer_input:
        print('You lost, better luck next time!')
    else:
        print('It\\'s a tie!')
else:
    print('Please type "roll" to play the game!')`,
                hasInput: true
            },
            {
                id: 16,
                title: "Multi-Game Arcade",
                author: "Student Submission",
                category: "games",
                description: "An impressive multi-game program featuring Rock Paper Scissors, Number Guessing, and secret games!",
                code: `import random

print("=== MULTI-GAME ARCADE ===")
welcome = input("Choose game: Rock paper scissors / guess the number / card: ").lower()

if welcome == 'rock paper scissors':
    print("\\n=== ROCK PAPER SCISSORS ===")
    choose = input("ROCK, PAPER OR SCISSORS: ").lower()
    list1 = ['rock','paper','scissors']
    ai = random.choice(list1)
    
    print(f"You chose: {choose}")
    print(f"AI chose: {ai}")
    
    if choose == 'rock' and ai == 'paper' or choose == 'paper' and ai == 'scissors' or choose == 'scissors' and ai == 'rock':
        print("You lost to", ai)
    elif choose == ai:
        print("You tied with", ai)
    elif choose == 'rock' and ai == 'scissors' or choose == 'scissors' and ai == 'paper' or choose == 'paper' and ai == 'rock':
        print("You win against", ai)
    else:
        print("Please enter rock, paper, or scissors")

elif welcome == "guess the number":
    print("\\n=== NUMBER GUESSING GAME ===")
    choose2 = int(input("Guess the number from 1 to 67: "))
    ai2 = random.randint(1, 67)
    
    if choose2 == ai2:
        print("You won! Here, have a virtual cookie ðŸª")
    else:
        print("You lost, it was", ai2)

elif welcome == "cards":
    print("I didn't finish it, put 'six seven' for a secret game instead")

elif welcome == "six seven":
    print("\\n=== SECRET GEOGRAPHY GAME ===")
    secret = input("You unlock the secret game! In what continent are the islands below Asia? (use proper grammar): ").title()
    answer = "Oceania"
    
    if secret == answer:
        print("You won! But enter 'twenty one' in the first part for another secret")
    else:
        print("You got it wrong :( The answer was Oceania")

elif welcome == "twenty one":
    print("Did you think I created another one? Go back and play the others! ðŸ˜„")

else:
    print("Please choose: rock paper scissors, guess the number, or cards")`,
                hasInput: true
            }
        ];

        // Initialize the showcase
        function initShowcase() {
            renderPrograms();
            setupFilters();
            setupProgramCards();
        }

        // Render programs to the grid
        function renderPrograms(filterCategory = 'all') {
            const grid = document.getElementById('programsGrid');
            const filteredPrograms = filterCategory === 'all' 
                ? studentPrograms 
                : studentPrograms.filter(program => program.category === filterCategory);

            grid.innerHTML = filteredPrograms.map(program => `
                <div class="program-card" data-category="${program.category}">
                    <div class="program-header">
                        <div>
                            <h3 class="program-title">${program.title}</h3>
                            <p class="program-author">${program.author}</p>
                        </div>
                        <div class="program-category">${getCategoryName(program.category)}</div>
                    </div>
                    
                    <p class="program-description">${program.description}</p>
                    
                    <div class="code-preview">
                        <div class="code-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="code-content">
                            ${formatCode(program.code.substring(0, 300) + (program.code.length > 300 ? '...' : ''))}
                        </div>
                    </div>
                    
                    <div class="program-actions">
                        <button class="run-btn" onclick="runProgram(${program.id})" ${program.isJavaScript ? 'disabled title="JavaScript code - cannot run in Python environment"' : ''}>
                            <i class="fas fa-play"></i>
                            ${program.isJavaScript ? 'JavaScript Code' : 'Run Program'}
                        </button>
                        <button class="view-code-btn" onclick="toggleFullCode(${program.id})">
                            <i class="fas fa-code"></i>
                            View Full Code
                        </button>
                    </div>
                    
                    <div class="output-section" id="output-${program.id}">
                        <div class="output-header">
                            <i class="fas fa-terminal"></i>
                            Program Output
                        </div>
                        <div class="output-display" id="output-display-${program.id}"></div>
                    </div>
                </div>
            `).join('');
        }

        // Format code with syntax highlighting
        function formatCode(code) {
            return code
                .replace(/^(\s*#.*$)/gm, '<span class="comment">$1</span>')
                .replace(/\b(def|if|elif|else|for|while|import|from|return|print|input|random|int|str|len|max|min|range)\b/g, '<span class="keyword">$1</span>')
                .replace(/\b(print|input|len|max|min|range|randint|choice|upper|lower|title|strip)\b/g, '<span class="function">$1</span>')
                .replace(/"([^"]*)"/g, '<span class="string">"$1"</span>')
                .replace(/'([^']*)'/g, '<span class="string">\'$1\'</span>')
                .replace(/\b(\d+\.?\d*)\b/g, '<span class="number">$1</span>');
        }

        // Get category display name
        function getCategoryName(category) {
            const names = {
                'games': 'Games',
                'utilities': 'Utilities', 
                'interactive': 'Interactive',
                'logic': 'Logic & Math',
                'creative': 'Creative'
            };
            return names[category] || 'Other';
        }

        // Setup filter buttons
        function setupFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Update button states
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Filter programs
                    const category = button.dataset.category;
                    renderPrograms(category);
                    setupProgramCards();
                });
            });
        }

        // Setup program card interactions
        function setupProgramCards() {
            // Re-setup any event listeners that need to be refreshed after re-render
        }

        // Run a program
        async function runProgram(programId) {
            const program = studentPrograms.find(p => p.id === programId);
            if (!program || !pyodide) return;

            const outputSection = document.getElementById(`output-${programId}`);
            const outputDisplay = document.getElementById(`output-display-${programId}`);
            
            outputSection.classList.add('show');
            outputDisplay.textContent = 'Initializing...';

            try {
                if (program.hasInput) {
                    // For programs with input, we need to mock the input
                    let inputPrompts = [];
                    let inputValues = [];
                    
                    // Pre-define some sample inputs based on the program
                    switch(programId) {
                        case 1: // Voting checker
                            inputValues = ['25', 'citizen'];
                            break;
                        case 3: // Adventure game  
                            inputValues = ['left', 'try to sneak past'];
                            break;
                        case 5: // Magic 8-ball
                            inputValues = ['Will I pass my Python exam?'];
                            break;
                        case 6: // Lucky number
                            inputValues = ['333'];
                            break;
                        case 7: // Rock paper scissors
                            inputValues = ['rock'];
                            break;
                        case 8: // Letter guessing
                            inputValues = ['m'];
                            break;
                        case 9: // Age game
                            inputValues = ['50'];
                            break;
                        case 10: // Dice guess
                            inputValues = ['4'];
                            break;
                        case 12: // Question answerer
                            inputValues = ['Is Python awesome?', '9'];
                            break;
                        case 13: // Animal quiz
                            inputValues = ['koala'];
                            break;
                        case 14: // Math quiz
                            inputValues = ['0', '50']; // Will be replaced with correct answer
                            break;
                        case 15: // Dice battle
                            inputValues = ['roll'];
                            break;
                        case 16: // Multi-game
                            inputValues = ['rock paper scissors', 'rock'];
                            break;
                        default:
                            inputValues = ['test input'];
                    }

                    // Mock input function
                    let inputIndex = 0;
                    pyodide.globals.set('mock_inputs', inputValues);
                    pyodide.runPython(`
import sys
from io import StringIO

mock_inputs = mock_inputs
input_index = 0

def mock_input(prompt=""):
    global input_index, mock_inputs
    if input_index < len(mock_inputs):
        response = mock_inputs[input_index]
        input_index += 1
        print(f"{prompt}{response}")
        return response
    return "default"

# Replace the built-in input function
__builtins__['input'] = mock_input

# Capture output
old_stdout = sys.stdout
sys.stdout = captured_output = StringIO()
                    `);
                } else {
                    // For programs without input, just capture output
                    pyodide.runPython(`
import sys
from io import StringIO

old_stdout = sys.stdout
sys.stdout = captured_output = StringIO()
                    `);
                }

                // Run the student's code
                pyodide.runPython(program.code);

                // Get the captured output
                const output = pyodide.runPython(`
sys.stdout = old_stdout
captured_output.getvalue()
                `);

                outputDisplay.textContent = output || 'Program completed successfully (no output)';
                
                // Update successful runs counter
                completedRuns++;
                document.getElementById('completedRuns').textContent = completedRuns;

            } catch (error) {
                outputDisplay.innerHTML = `<div class="error-display">Error: ${error.message}</div>`;
            }
        }

        // Toggle full code view
        function toggleFullCode(programId) {
            const program = studentPrograms.find(p => p.id === programId);
            if (!program) return;

            // Create modal or expand code view
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.9);
                z-index: 1001;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
            `;

            modal.innerHTML = `
                <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 800px; max-height: 80vh; overflow-y: auto; width: 100%;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="margin: 0; color: #2d3748;">${program.title}</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" 
                                style="background: #ef4444; color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; margin-left: auto;">
                            Ã—
                        </button>
                    </div>
                    <div style="background: #1a202c; color: #e2e8f0; padding: 1.5rem; border-radius: 12px; font-family: monospace; white-space: pre-wrap; overflow-x: auto;">
${program.code}
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initPyodide();
            initShowcase();
        });
    </script>
</body>
</html>