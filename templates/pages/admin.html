{% extends 'base.html' %}
{% block title %}Admin Panel - CodeLab{% endblock %}
{% block content %}
<div class="main-content-wrapper admin-panel">
    <div class="header-bar">
        <h1 class="blog-title">Admin Panel</h1>
        <div class="greeting"><strong>Welcome, {{ session.get('user_name', 'Admin') }}</strong></div>
    </div>
    <!-- IDE Example Block -->
    <div id="admin-ide-example" style="min-height:220px; margin:24px 0; border:1px solid #eee; border-radius:6px;"></div>
    <div class="admin-sections">
        <!-- Students Section -->
        <div class="admin-section" id="admin-students">
            <h2><span class="material-symbols-outlined accent-blue">group</span> Students</h2>
            <table class="admin-table" id="students-table">
                <thead>
                    <tr><th>Name</th><th>Progress</th><th>Points</th><th>Currency</th><th>Actions</th></tr>
                </thead>
                <tbody><!-- Populated by JS --></tbody>
            </table>
        </div>
        <!-- Content Section -->
        <div class="admin-section" id="admin-content">
            <h2><span class="material-symbols-outlined accent-green">edit_note</span> Content</h2>
            <button class="admin-add-btn">Add Challenge</button>
            <div id="challenges-list"><!-- Populated by JS --></div>
        </div>
        <!-- Quizzes Section -->
        <div class="admin-section" id="admin-quizzes">
            <h2><span class="material-symbols-outlined accent-yellow">quiz</span> Quizzes</h2>
            <button class="admin-add-btn" id="add-quiz-btn">Add Quiz Question</button>
            <div id="quizzes-list"><!-- Populated by JS --></div>
        </div>
        <!-- Store Section -->
        <div class="admin-section" id="admin-store">
            <h2><span class="material-symbols-outlined accent-red">storefront</span> Store</h2>
            <button class="admin-add-btn" id="add-store-btn">Add Store Item</button>
            <div id="store-list"><!-- Populated by JS --></div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="/static/js/ide_ace_editor.js"></script>
    <link rel="stylesheet" href="/static/css/ide_file_explorer.css">
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Example code to display in the IDE
        var exampleCode = `# Example Python code\nprint("Hello, Admin!")`;
        if (window.IDEAceEditor && document.getElementById('admin-ide-example')) {
          window.IDEAceEditor.createEditor('admin-ide-example', {
            value: exampleCode,
            readOnly: true,
            theme: "ace/theme/monokai",
            mode: "ace/mode/python",
            showPrintMargin: false,
            highlightActiveLine: false,
            highlightGutterLine: false,
            fontSize: "1.08em",
            maxLines: 10,
            minLines: 3,
            wrap: true
          });
        }
      });
    </script>
{% endblock %}
</html>
