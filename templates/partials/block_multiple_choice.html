<div class="block-multiple-choice mcq-image-style" style="margin:0;padding:0.5em 0.5em 0.5em 0.5em; background:#fff; border:1px solid #e0d0fa; border-radius:7px; box-shadow:0 1px 4px rgba(143,0,255,0.03); overflow:hidden;">
  <!-- College-style ribbon with subtle look -->
  <div style="display:flex; justify-content:space-between; align-items:center; background:#f7f3fa; border-left:4px solid #8F00FF; border-radius:5px 5px 0 0; border-bottom:1px solid #e0d0fa; padding:0.4em 1em 0.4em 1em; font-size:0.98em; font-weight:500; letter-spacing:0.01em; box-shadow:none; margin-bottom:0.7em;">
    <span style="color:#4B367C; text-shadow:none;">Question 1 of 1</span>
    <span style="background:#8F00FF; color:#fff; border-radius:4px; padding:0.12em 0.7em; font-size:0.92em; font-weight:600; letter-spacing:0.01em; box-shadow:none;">1 Byte</span>
  </div>
  {% if block.question %}
    <div class="mcq-question-row" style="margin-bottom:0.2em;">
      <div class="mcq-question" style="margin-bottom:0.2em; font-size:1.08em; font-weight:600; color:#4B367C; background:none;">{{ block.question | replace('1 pt','') | replace('.', '') | markdown | safe }}</div>
      <div class="mcq-options-grid" style="display:flex; flex-direction:column; gap:0.5em; margin-bottom:0.2em;">
        {% set zipped = (block.options|zip(range(block.options|length)))|shuffle %}
        {% for opt_idx in range(0, zipped|length, 2) %}
          <div style="display:flex; gap:0.5em;">
            {% for offset in [0,1] %}
              {% if zipped[opt_idx + offset] is defined %}
                {% set opt, idx = zipped[opt_idx + offset] %}
                <button type="button" class="mcq-option-btn themed-btn" data-option-idx="{{ idx }}" style="flex:1; min-width:0; box-sizing:border-box; margin-bottom:0; font-size:1em; padding:0.6em 1em; border-radius:6px; background:#8F00FF !important; color:#fff; border:none; font-weight:600; transition:background 0.18s,box-shadow 0.18s;">{{ opt | markdown | safe }}</button>
              {% endif %}
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% elif block.questions %}
    {% set q = block.questions[0] %}
    <div class="mcq-question-row" style="margin-bottom:0.2em;">
      <div class="mcq-question" style="margin-bottom:0.2em; font-size:1.08em; font-weight:600; color:#4B367C; background:none;">{{ q.question | replace('1 pt','') | replace('.', '') | markdown | safe }}</div>
      <div class="mcq-options-grid" style="display:flex; flex-direction:column; gap:0.5em; margin-bottom:0.2em;">
        {% set zipped = (q.options|zip(range(q.options|length)))|shuffle %}
        {% for opt_idx in range(0, zipped|length, 2) %}
          <div style="display:flex; gap:0.5em;">
            {% for offset in [0,1] %}
              {% if zipped[opt_idx + offset] is defined %}
                {% set opt, idx = zipped[opt_idx + offset] %}
                <button type="button" class="mcq-option-btn themed-btn" data-option-idx="{{ idx }}" style="flex:1; min-width:0; box-sizing:border-box; margin-bottom:0; font-size:1em; padding:0.6em 1em; border-radius:6px; background:#8F00FF !important; color:#fff; border:none; font-weight:600; transition:background 0.18s,box-shadow 0.18s;">{{ opt | markdown | safe }}</button>
              {% endif %}
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <div class="mcq-question-row" style="margin-bottom:0.2em; color:#ff4e6a;">No question data found for this block</div>
  {% endif %}
  <div class="mcq-feedback feedback" style="display:none; margin-top:0.3em;"></div>
</div>
