{% extends "base.html" %}

{% block title %}Python Projects - Code with Morais{% endblock %}

{% block head %}
<!-- CodeMirror for code editor -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/monokai.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"></script>

<!-- Pyodide for real Python execution -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>

<style>
    .projects-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .projects-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,0 1000,0 1000,100"/></svg>');
        pointer-events: none;
    }

    .projects-hero h1 {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 1rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .projects-hero .subtitle {
        font-size: 1.4rem;
        opacity: 0.9;
        font-weight: 300;
        margin-bottom: 1rem;
    }

    .section-header {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin: 2rem;
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .section-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(135deg, #667eea, #764ba2);
    }

    .section-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
    }

    .projects-grid {
        display: flex;
        flex-direction: column;
        gap: 3rem;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.3);
    }

    .project-pair {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 2rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
    }

    .project-pair.locked {
        opacity: 0.5;
        pointer-events: none;
    }

    .lock-overlay {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 87, 87, 0.9);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        z-index: 10;
    }

    .pair-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .pair-title {
        color: #333;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .pair-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
    }

    .project-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        padding: 2.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .project-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(135deg, #667eea, #764ba2);
    }

    .project-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        border-color: rgba(102, 126, 234, 0.3);
    }

    .project-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        font-size: 2rem;
        color: white;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        transition: all 0.3s ease;
    }

    .project-title {
        font-size: 1.6rem;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 1rem;
        text-align: center;
    }

    .project-description {
        color: #4a5568;
        line-height: 1.6;
        margin-bottom: 1.5rem;
    }

    .project-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: rgba(248, 250, 252, 0.8);
        border-radius: 10px;
    }

    .difficulty-badge {
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .difficulty-beginner {
        background: linear-gradient(135deg, #48bb78, #38a169);
        color: white;
    }

    .difficulty-intermediate {
        background: linear-gradient(135deg, #ed8936, #dd6b20);
        color: white;
    }

    .difficulty-advanced {
        background: linear-gradient(135deg, #e53e3e, #c53030);
        color: white;
    }

    .project-duration {
        color: #667eea;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .project-features {
        background: rgba(102, 126, 234, 0.1);
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 1.5rem;
    }

    .project-features h4 {
        color: #667eea;
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .features-list {
        list-style: none;
        font-size: 0.9rem;
        color: #4a5568;
    }

    .features-list li {
        margin-bottom: 0.5rem;
        padding-left: 1.2rem;
        position: relative;
    }

    .features-list li::before {
        content: 'âœ“';
        color: #667eea;
        position: absolute;
        left: 0;
        font-weight: bold;
    }

    .project-button {
        width: 100%;
        padding: 1rem 2rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .project-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    /* Modal styles */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        backdrop-filter: blur(5px);
    }

    .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border-radius: 20px;
        padding: 2rem;
        max-width: 90vw;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    }

    .editor-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-top: 2rem;
    }

    .code-panel, .output-panel {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 1rem;
    }

    .CodeMirror {
        height: 400px;
        border-radius: 8px;
    }

    .run-button {
        background: #28a745;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        margin-top: 1rem;
    }

    .run-button:hover {
        background: #218838;
    }

    .output-area {
        background: #2d3748;
        color: #e2e8f0;
        padding: 1rem;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        min-height: 200px;
        white-space: pre-wrap;
    }

    @media (max-width: 768px) {
        .editor-container {
            grid-template-columns: 1fr;
        }
        
        .projects-hero h1 {
            font-size: 2.5rem;
        }
        
        .pair-content {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Header -->
<header class="projects-hero">
    <div class="hero-content">
        <h1><i class="fas fa-rocket"></i> Python Projects</h1>
        <p class="subtitle">Master Random Module & Conditional Logic</p>
        <p>Hands-on programming exercises to build your Python skills</p>
    </div>
</header>

<!-- Section Header -->
<section class="section-header">
    <h2 class="section-title">
        <i class="fas fa-code"></i>
        Interactive Python Practice
    </h2>
    <p class="section-description">
        Each project focuses on specific Python concepts with hands-on coding practice. 
        Complete projects in order to unlock new challenges and build your programming portfolio.
    </p>
</section>

<!-- Projects Grid -->
<div class="projects-grid">
    
    <!-- Pair 19: Random Module Basics -->
    <div class="project-pair" id="pair-19">
        <div class="pair-header">
            <h3 class="pair-title">ðŸŽ² Pair 19: Random Module Basics</h3>
            <p class="pair-description">
                Discover the power of randomness! Learn to generate random numbers and make unpredictable choices in your programs.
            </p>
        </div>
        <div class="pair-content">
            <!-- Project 37: Random Numbers Guided -->
            <div class="project-card" onclick="openProject('random-numbers-guided')">
                <div class="project-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <h3 class="project-title">Guided Practice</h3>
                <p class="project-description">
                    Learn to generate random numbers using the random module. 
                    Create dice rolls and random selections with step-by-step guidance.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-beginner">Guided</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        5-7 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Importing the random module</li>
                        <li>Using random.randint()</li>
                        <li>Creating dice roll simulators</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
            </div>

            <!-- Project 38: Random Choice Challenge -->
            <div class="project-card" onclick="openProject('random-choice-challenge')">
                <div class="project-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="project-title">Independent Challenge</h3>
                <p class="project-description">
                    Apply randomness skills! Create a random name picker and fortune teller using random.choice().
                    Test your understanding of random selections.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-beginner">Challenge</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        7-10 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Using random.choice()</li>
                        <li>Working with lists and randomness</li>
                        <li>Independent problem solving</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-rocket"></i>
                    Start Challenge
                </button>
            </div>
        </div>
    </div>

    <!-- Pair 20: Basic Conditionals -->
    <div class="project-pair locked" id="pair-20">
        <div class="lock-overlay">
            <i class="fas fa-lock"></i>
            Complete Pair 19 to unlock
        </div>
        <div class="pair-header">
            <h3 class="pair-title">ðŸ”€ Pair 20: Basic Conditionals</h3>
            <p class="pair-description">
                Make decisions in your code! Learn if/else statements to create programs that respond differently based on conditions.
            </p>
        </div>
        <div class="pair-content">
            <!-- Project 39: If/Else Guided -->
            <div class="project-card" onclick="openProject('if-else-guided')">
                <div class="project-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <h3 class="project-title">Guided Practice</h3>
                <p class="project-description">
                    Learn the basics of if/else statements to make decisions in your code.
                    Create age checkers and simple decision programs.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-beginner">Guided</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        5-7 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Basic if statements</li>
                        <li>if/else structure</li>
                        <li>Boolean conditions</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
            </div>

            <!-- Project 40: Multiple Conditions Challenge -->
            <div class="project-card" onclick="openProject('multiple-conditions-challenge')">
                <div class="project-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="project-title">Independent Challenge</h3>
                <p class="project-description">
                    Apply conditional logic! Create a grade calculator that uses multiple if/else conditions.
                    Test your understanding of decision making.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-beginner">Challenge</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        7-10 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Multiple if/else conditions</li>
                        <li>Range comparisons</li>
                        <li>Independent decision logic</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-rocket"></i>
                    Start Challenge
                </button>
            </div>
        </div>
    </div>

    <!-- Pair 21: Advanced Conditionals (elif) -->
    <div class="project-pair locked" id="pair-21">
        <div class="lock-overlay">
            <i class="fas fa-lock"></i>
            Complete Pair 20 to unlock
        </div>
        <div class="pair-header">
            <h3 class="pair-title">ðŸŽ¯ Pair 21: Advanced Conditionals</h3>
            <p class="pair-description">
                Master elif statements for complex decision trees! Handle multiple conditions elegantly and efficiently.
            </p>
        </div>
        <div class="pair-content">
            <!-- Project 41: Elif Structure Guided -->
            <div class="project-card" onclick="openProject('elif-structure-guided')">
                <div class="project-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <h3 class="project-title">Guided Practice</h3>
                <p class="project-description">
                    Learn elif (else if) statements to handle multiple conditions cleanly.
                    Create weather response systems and categorization programs.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-intermediate">Guided</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        6-8 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>elif statement structure</li>
                        <li>Chained conditions</li>
                        <li>Clean conditional logic</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
            </div>

            <!-- Project 42: Complex Decision Challenge -->
            <div class="project-card" onclick="openProject('complex-decision-challenge')">
                <div class="project-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="project-title">Independent Challenge</h3>
                <p class="project-description">
                    Apply advanced conditionals! Create a restaurant recommendation system using complex elif chains.
                    Test your mastery of decision structures.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-intermediate">Challenge</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        8-12 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Complex elif chains</li>
                        <li>Multiple variable conditions</li>
                        <li>Advanced decision making</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-rocket"></i>
                    Start Challenge
                </button>
            </div>
        </div>
    </div>

    <!-- Pair 22: Random + Conditionals Combined -->
    <div class="project-pair locked" id="pair-22">
        <div class="lock-overlay">
            <i class="fas fa-lock"></i>
            Complete Pair 21 to unlock
        </div>
        <div class="pair-header">
            <h3 class="pair-title">ðŸŽ® Pair 22: Random + Conditionals</h3>
            <p class="pair-description">
                Combine randomness with decision making! Create interactive games and simulations that respond to random events.
            </p>
        </div>
        <div class="pair-content">
            <!-- Project 43: Random Game Guided -->
            <div class="project-card" onclick="openProject('random-game-guided')">
                <div class="project-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <h3 class="project-title">Guided Practice</h3>
                <p class="project-description">
                    Combine random numbers with if/elif/else to create a simple guessing game.
                    Learn to make interactive programs with unpredictable outcomes.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-intermediate">Guided</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        8-10 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Combining random and conditionals</li>
                        <li>Creating interactive games</li>
                        <li>User input handling</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-play"></i>
                    Start Practice
                </button>
            </div>

            <!-- Project 44: Adventure Simulator Challenge -->
            <div class="project-card" onclick="openProject('adventure-simulator-challenge')">
                <div class="project-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="project-title">Independent Challenge</h3>
                <p class="project-description">
                    Create an adventure simulator! Use random events and complex conditionals to build an engaging story game.
                    Demonstrate mastery of both concepts.
                </p>
                <div class="project-meta">
                    <div class="difficulty-badge difficulty-advanced">Challenge</div>
                    <div class="project-duration">
                        <i class="fas fa-clock"></i>
                        12-15 min
                    </div>
                </div>
                <div class="project-features">
                    <h4>You'll Practice</h4>
                    <ul class="features-list">
                        <li>Advanced random + conditional logic</li>
                        <li>Complex program structure</li>
                        <li>Creative problem solving</li>
                    </ul>
                </div>
                <button class="project-button">
                    <i class="fas fa-trophy"></i>
                    Final Challenge
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Project Modal -->
<div id="projectModal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2 id="modalTitle">Project Title</h2>
            <button onclick="closeModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">Ã—</button>
        </div>
        
        <div id="modalInstructions" style="margin-bottom: 2rem;">
            <!-- Instructions will be loaded here -->
        </div>
        
        <div class="editor-container">
            <div class="code-panel">
                <h3>Your Code</h3>
                <textarea id="codeEditor"></textarea>
                <button class="run-button" onclick="runCode()">
                    <i class="fas fa-play"></i> Run Code
                </button>
            </div>
            
            <div class="output-panel">
                <h3>Output</h3>
                <div id="output" class="output-area">Click "Run Code" to see your output here...</div>
                
                <div id="hints" style="margin-top: 1rem; display: none;">
                    <h4>ðŸ’¡ Hints</h4>
                    <ul id="hintsList"></ul>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 2rem; text-align: center;">
            <button onclick="showHints()" style="background: #17a2b8; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; margin-right: 1rem;">
                ðŸ’¡ Show Hints
            </button>
            <button onclick="closeModal()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;">
                Close
            </button>
        </div>
    </div>
</div>

<script>
// Project definitions for the new random/conditional projects
const projects = {
    'random-numbers-guided': {
        title: 'Random Numbers - Guided Practice',
        concept: 'Using the Random Module',
        objective: 'Learn to generate random numbers using the random module for dice rolls and number games.',
        instructions: [
            'Import the random module at the top of your code.',
            'Create a dice roll that generates numbers from 1 to 6 using random.randint().',
            'Generate a lucky number between 1 and 100.',
            'Print both results with clear labels.'
        ],
        starterCode: `# Step 1: Import the random module
# TODO: import random

# Step 2: Roll a six-sided dice
# TODO: Use random.randint(1, 6) and store in dice_roll

# Step 3: Generate a lucky number (1-100)
# TODO: Use random.randint(1, 100) and store in lucky_number

# Step 4: Print both results
# TODO: Print with labels

`,
        expectedOutput: "Project 37 Result: Dice rolled: [random 1-6]\nProject 37 Result: Lucky number is [random 1-100]",
        hints: [
            'Use "import random" at the top',
            'random.randint(1, 6) gives numbers from 1 to 6',
            'random.randint(1, 100) gives numbers from 1 to 100',
            'Each run will produce different random numbers'
        ]
    },
    'random-choice-challenge': {
        title: 'Random Choice - Independent Challenge',
        concept: 'Random Selection from Lists',
        objective: 'Apply random selection skills to pick items from lists using random.choice().',
        instructions: [
            'You have a list of names: ["Alice", "Bob", "Charlie", "Diana"].',
            'You have a list of fortunes: ["Great luck ahead!", "Beware of falling coconuts", "You will find $5 today"].',
            'Use random.choice() to pick a random name.',
            'Use random.choice() to pick a random fortune.',
            'Print both selections with labels.'
        ],
        starterCode: `import random

# Lists to choose from
names = ["Alice", "Bob", "Charlie", "Diana"]
fortunes = ["Great luck ahead!", "Beware of falling coconuts", "You will find $5 today"]

# Your turn! Make random selections
# TODO: Use random.choice() to pick a name

# TODO: Use random.choice() to pick a fortune

# TODO: Print both selections with labels

`,
        expectedOutput: "Project 38 Result: Selected name: [random name]\nProject 38 Result: Fortune: [random fortune]",
        hints: [
            'Use random.choice(names) to pick from the names list',
            'Use random.choice(fortunes) to pick from fortunes',
            'Store the results in variables before printing',
            'Each run will produce different random selections'
        ]
    },
    'if-else-guided': {
        title: 'If/Else Statements - Guided Practice',
        concept: 'Basic Conditional Logic',
        objective: 'Learn to make decisions in your code using if/else statements.',
        instructions: [
            'You have a variable age = 20.',
            'Use an if statement to check if age is greater than or equal to 18.',
            'If true, print "You are an adult".',
            'If false, print "You are a minor".',
            'This creates a simple decision in your program.'
        ],
        starterCode: `# Step 1: Set the age
age = 20

# Step 2: Check if person is an adult (18 or older)
# TODO: Use if age >= 18:

    # TODO: Print "You are an adult"

# TODO: Use else:

    # TODO: Print "You are a minor"

`,
        expectedOutput: "Project 39 Result: You are an adult",
        hints: [
            'Use "if age >= 18:" (don\'t forget the colon)',
            'Indent the print statement under the if',
            'Use "else:" for the alternative condition',
            'Indent the else print statement too'
        ]
    },
    'multiple-conditions-challenge': {
        title: 'Multiple Conditions - Independent Challenge',
        concept: 'Grade Classification with Conditions',
        objective: 'Apply conditional logic to create a grade calculator using if/elif/else.',
        instructions: [
            'You have a test score = 95.',
            'Create a grade system: A (90+), B (80-89), C (70-79), F (below 70).',
            'Use if/elif/else statements to determine the grade.',
            'Print the final grade with a label.'
        ],
        starterCode: `# Test score to evaluate
score = 95

# Your turn! Create the grade calculator
# TODO: Check if score >= 90 for grade A

# TODO: Check if score >= 80 for grade B

# TODO: Check if score >= 70 for grade C

# TODO: Otherwise, assign grade F

`,
        expectedOutput: "Project 40 Result: Grade: A",
        hints: [
            'Start with "if score >= 90:"',
            'Use "elif score >= 80:" for the next condition',
            'Use "elif score >= 70:" for the third condition',
            'Use "else:" for scores below 70'
        ]
    },
    'elif-structure-guided': {
        title: 'Elif Structure - Guided Practice',
        concept: 'Multiple Conditional Branches',
        objective: 'Learn to handle multiple conditions cleanly using elif statements.',
        instructions: [
            'You have a temperature = 45 degrees.',
            'Create weather advice: Cold (<50), Cool (50-69), Warm (70-85), Hot (>85).',
            'Use if/elif/else to give appropriate clothing advice.',
            'Print the recommendation.'
        ],
        starterCode: `# Step 1: Set the temperature
temperature = 45

# Step 2: Give clothing advice based on temperature
# TODO: Use if temperature < 50:

    # TODO: Print "Wear a heavy coat"

# TODO: Use elif temperature < 70:

    # TODO: Print "Wear a jacket"

# TODO: Use elif temperature < 86:

    # TODO: Print "Wear light clothes"

# TODO: Use else:

    # TODO: Print "Stay cool with shorts"

`,
        expectedOutput: "Project 41 Result: Wear a heavy coat",
        hints: [
            'Start with "if temperature < 50:"',
            'Use "elif temperature < 70:" for the next range',
            'Use "elif temperature < 86:" for warm weather',
            'Use "else:" for very hot weather'
        ]
    },
    'complex-decision-challenge': {
        title: 'Complex Decisions - Independent Challenge',
        concept: 'Multi-Variable Conditional Logic',
        objective: 'Create a restaurant recommendation system using complex elif conditions.',
        instructions: [
            'You have budget = 25 and cuisine = "Italian".',
            'Create recommendations based on both budget and cuisine preference.',
            'Budget categories: Low (â‰¤20), Medium (21-40), High (>40).',
            'Handle Italian, Chinese, and Mexican cuisines.',
            'Print the restaurant recommendation.'
        ],
        starterCode: `# Customer preferences
budget = 25
cuisine = "Italian"

# Your turn! Create the recommendation system
# TODO: Handle Italian cuisine with budget levels

# TODO: Handle Chinese cuisine with budget levels  

# TODO: Handle Mexican cuisine with budget levels

# TODO: Handle unknown cuisines

`,
        expectedOutput: "Project 42 Result: Try Pizza Palace",
        hints: [
            'Use nested conditions or combine with "and"',
            'Check cuisine == "Italian" and budget <= 20',
            'Create different recommendations for each budget level',
            'Don\'t forget the else case for unknown cuisines'
        ]
    },
    'random-game-guided': {
        title: 'Random Game - Guided Practice',
        concept: 'Combining Random Numbers with Conditionals',
        objective: 'Create an interactive guessing game that combines random numbers with decision logic.',
        instructions: [
            'Generate a random secret number between 1 and 10.',
            'Set a user guess (you can hardcode it for now, like user_guess = 7).',
            'Compare the guess to the secret number.',
            'Give feedback: "Too high!", "Too low!", or "Correct!".'
        ],
        starterCode: `# Step 1: Import random and generate secret number
import random
secret_number = random.randint(1, 10)

# Step 2: Set user's guess (hardcoded for practice)
user_guess = 7

# Step 3: Compare and give feedback
# TODO: Use if user_guess > secret_number:

    # TODO: Print "Too high!"

# TODO: Use elif user_guess < secret_number:

    # TODO: Print "Too low!"

# TODO: Use else:

    # TODO: Print "Correct!"

# TODO: Print the secret number for verification

`,
        expectedOutput: "Project 43 Result: [Feedback based on random number]",
        hints: [
            'Use random.randint(1, 10) for the secret number',
            'Compare user_guess with secret_number',
            'Use if/elif/else for the three possible outcomes',
            'Print the secret number so you can verify the logic'
        ]
    },
    'adventure-simulator-challenge': {
        title: 'Adventure Simulator - Independent Challenge',
        concept: 'Advanced Random Events with Complex Conditionals',
        objective: 'Create an adventure game that uses random events and complex decision trees.',
        instructions: [
            'Create a list of random events: ["forest", "cave", "river", "mountain"].',
            'Use random.choice() to select a random location.',
            'Create different adventure outcomes for each location.',
            'Use your character\'s health = 100 to affect some outcomes.',
            'Print an engaging adventure story based on the random event.'
        ],
        starterCode: `import random

# Adventure setup
events = ["forest", "cave", "river", "mountain"]
health = 100

# Your turn! Create the adventure simulator
# TODO: Use random.choice() to pick a random event

# TODO: Use if/elif statements for each location

# TODO: Create engaging outcomes for each location

# TODO: Consider health in some scenarios

# TODO: Print an adventure story

`,
        expectedOutput: "Project 44 Result: [Adventure story based on random location]",
        hints: [
            'Use random.choice(events) to pick a location',
            'Create if/elif branches for each event type',
            'Make the stories engaging and different',
            'Consider using health in some conditions',
            'Each run should produce a different adventure!'
        ]
    }
};

// Code execution and validation
let pyodide;
let codeEditor;

// Initialize Pyodide
async function loadPyodide() {
    if (!pyodide) {
        try {
            pyodide = await loadPyodide();
            console.log('Pyodide loaded successfully');
        } catch (error) {
            console.error('Failed to load Pyodide:', error);
        }
    }
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    loadPyodide();
    
    // Initialize project progress tracking
    initializeProjectTracker();
    checkPairCompletion();
});

// Project modal functions
function openProject(projectId) {
    const project = projects[projectId];
    if (!project) {
        console.error('Project not found:', projectId);
        return;
    }
    
    // Set modal content
    document.getElementById('modalTitle').textContent = project.title;
    
    // Create instructions HTML
    const instructionsHTML = `
        <div class="project-concept">
            <strong>Concept:</strong> ${project.concept}
        </div>
        <div class="project-objective">
            <strong>Objective:</strong> ${project.objective}
        </div>
        <div class="project-instructions">
            <strong>Instructions:</strong>
            <ol>
                ${project.instructions.map(instruction => `<li>${instruction}</li>`).join('')}
            </ol>
        </div>
    `;
    
    document.getElementById('modalInstructions').innerHTML = instructionsHTML;
    
    // Set up code editor
    if (codeEditor) {
        codeEditor.toTextArea();
    }
    
    document.getElementById('codeEditor').value = project.starterCode;
    
    codeEditor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
        mode: 'python',
        theme: 'monokai',
        lineNumbers: true,
        indentUnit: 4,
        indentWithTabs: false,
        lineWrapping: true
    });
    
    // Store project info for validation
    document.getElementById('projectModal').setAttribute('data-project', projectId);
    
    // Show modal
    document.getElementById('projectModal').style.display = 'block';
    
    // Clear output and hide hints
    document.getElementById('output').textContent = 'Click "Run Code" to see your output here...';
    document.getElementById('hints').style.display = 'none';
}

function closeModal(event) {
    if (!event || event.target.id === 'projectModal' || !event.target.closest('.modal-content')) {
        document.getElementById('projectModal').style.display = 'none';
        if (codeEditor) {
            codeEditor.toTextArea();
            codeEditor = null;
        }
    }
}

async function runCode() {
    if (!pyodide) {
        document.getElementById('output').textContent = 'Loading Python environment...';
        await loadPyodide();
    }
    
    const code = codeEditor.getValue();
    const outputElement = document.getElementById('output');
    
    try {
        // Clear previous output
        outputElement.textContent = '';
        
        // Capture output
        pyodide.runPython(`
import sys
import io
sys.stdout = io.StringIO()
        `);
        
        // Run user code
        pyodide.runPython(code);
        
        // Get output
        const output = pyodide.runPython('sys.stdout.getvalue()');
        
        // Display output
        outputElement.textContent = output || 'Code executed successfully (no output)';
        
        // Check if project is completed correctly
        checkProjectCompletion(code, output);
        
    } catch (error) {
        outputElement.textContent = `Error: ${error.message}`;
    }
}

function showHints() {
    const projectId = document.getElementById('projectModal').getAttribute('data-project');
    const project = projects[projectId];
    
    if (project && project.hints) {
        const hintsHTML = project.hints.map(hint => `<li>${hint}</li>`).join('');
        document.getElementById('hintsList').innerHTML = hintsHTML;
        document.getElementById('hints').style.display = 'block';
    }
}

function checkProjectCompletion(code, output) {
    const projectId = document.getElementById('projectModal').getAttribute('data-project');
    const project = projects[projectId];
    
    if (!project) return;
    
    // Simple validation - check if output contains expected elements
    // For random projects, we need to be flexible with validation
    let isCorrect = false;
    
    switch(projectId) {
        case 'random-numbers-guided':
            isCorrect = code.includes('import random') && 
                       code.includes('random.randint') && 
                       output.includes('Dice rolled:') && 
                       output.includes('Lucky number');
            break;
        case 'random-choice-challenge':
            isCorrect = code.includes('random.choice(names)') && 
                       code.includes('random.choice(fortunes)') && 
                       output.includes('Selected name:') && 
                       output.includes('Fortune:');
            break;
        case 'if-else-guided':
            isCorrect = code.includes('if age >= 18:') && 
                       code.includes('else:') && 
                       output.includes('You are an adult');
            break;
        case 'multiple-conditions-challenge':
            isCorrect = code.includes('if score >= 90') && 
                       code.includes('elif') && 
                       output.includes('Grade: A');
            break;
        case 'elif-structure-guided':
            isCorrect = code.includes('if temperature < 50') && 
                       code.includes('elif') && 
                       output.includes('Wear a heavy coat');
            break;
        case 'complex-decision-challenge':
            isCorrect = code.includes('elif') && 
                       code.includes('cuisine') && 
                       code.includes('budget') && 
                       output.length > 0;
            break;
        case 'random-game-guided':
            isCorrect = code.includes('import random') && 
                       code.includes('if user_guess') && 
                       code.includes('elif') && 
                       code.includes('else:');
            break;
        case 'adventure-simulator-challenge':
            isCorrect = code.includes('random.choice(events)') && 
                       code.includes('if') && 
                       code.includes('elif');
            break;
        default:
            isCorrect = output.length > 0;
    }
    
    if (isCorrect) {
        // Mark project as completed
        markProjectCompleted(projectId);
        
        // Show success message
        setTimeout(() => {
            alert('ðŸŽ‰ Congratulations! Project completed successfully!');
        }, 500);
    }
}

// Project progress tracking
let projectTracker = {
    progress: {}
};

function initializeProjectTracker() {
    const saved = localStorage.getItem('pythonProjectsProgress');
    if (saved) {
        projectTracker = JSON.parse(saved);
    }
    updateProgressDisplay();
}

function markProjectCompleted(projectId) {
    projectTracker.progress[projectId] = {
        status: 'completed',
        completedAt: new Date().toISOString()
    };
    
    localStorage.setItem('pythonProjectsProgress', JSON.stringify(projectTracker));
    updateProgressDisplay();
    checkPairCompletion();
}

function updateProgressDisplay() {
    // Update UI to show completed projects
    Object.keys(projectTracker.progress).forEach(projectId => {
        if (projectTracker.progress[projectId].status === 'completed') {
            const projectCards = document.querySelectorAll(`[onclick="openProject('${projectId}')"]`);
            projectCards.forEach(card => {
                card.classList.add('completed');
                // Add completion badge
                if (!card.querySelector('.completion-badge')) {
                    const badge = document.createElement('div');
                    badge.className = 'completion-badge';
                    badge.innerHTML = '<i class="fas fa-check"></i> Completed';
                    badge.style.cssText = `
                        position: absolute;
                        top: 1rem;
                        left: 1rem;
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        padding: 0.5rem 1rem;
                        border-radius: 20px;
                        font-size: 0.8rem;
                        font-weight: 600;
                        z-index: 10;
                    `;
                    card.appendChild(badge);
                }
            });
        }
    });
}

function checkPairCompletion() {
    if (!projectTracker || !projectTracker.progress) return;
    
    const progress = projectTracker.progress;
    
    // Define project pairs for the new projects
    const pairs = [
        ['random-numbers-guided', 'random-choice-challenge'],      // Pair 19
        ['if-else-guided', 'multiple-conditions-challenge'],       // Pair 20
        ['elif-structure-guided', 'complex-decision-challenge'],   // Pair 21
        ['random-game-guided', 'adventure-simulator-challenge']    // Pair 22
    ];
    
    // Check each pair and unlock next one if current is complete
    pairs.forEach((pair, index) => {
        const [project1, project2] = pair;
        const pair1Complete = progress[project1]?.status === 'completed';
        const pair2Complete = progress[project2]?.status === 'completed';
        
        if (pair1Complete && pair2Complete) {
            // Current pair is complete, unlock next pair
            const nextPairNumber = 20 + index + 1; // Start from pair 20
            const nextPairElement = document.getElementById(`pair-${nextPairNumber}`);
            if (nextPairElement && nextPairElement.classList.contains('locked')) {
                nextPairElement.classList.remove('locked');
                
                // Show celebration message
                setTimeout(() => {
                    showPairUnlockedMessage(`Pair ${nextPairNumber}`);
                }, 300);
            }
        }
    });
}

function showPairUnlockedMessage(pairName) {
    const message = document.createElement('div');
    message.innerHTML = `ðŸŽ‰ ${pairName} Unlocked!`;
    message.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-weight: 600;
        z-index: 2000;
        animation: slideIn 0.5s ease;
    `;
    
    document.body.appendChild(message);
    
    setTimeout(() => {
        message.remove();
    }, 3000);
}

// Add CSS animation
const style = document.createElement('style');
style.textContent = `
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.project-card.completed {
    border-color: #10b981 !important;
    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3) !important;
}
`;
document.head.appendChild(style);
</script>
{% endblock %}